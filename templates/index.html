<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TeenWellness - Mental Health Consultancy</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white font-sans">

<!-- Navbar -->
<header class="flex justify-between items-center p-5">
    <h1 class="text-3xl font-bold text-blue-600">Teen<span class="text-cyan-500">Wellness</span></h1>
    <button id="loginButton" class="bg-teal-600 text-white py-2 px-6 rounded-lg hover:bg-teal-700">LOGIN</button>
</header>

<!-- Hero Section -->
<section class="flex flex-col lg:flex-row items-center lg:justify-between px-10 py-24 lg:py-32">
    <div class="max-w-2xl">
        <h2 class="text-5xl lg:text-6xl font-extrabold mb-6 leading-tight">
            Healthy Minds, Happy Lives <span class="text-cyan-500">Mental Health Consultancy</span>
        </h2>
        <p class="text-lg lg:text-xl text-gray-600 mb-8">
            Welcome to MindMates, your haven for mental wellness! Explore resources, find support, and connect with a community dedicated to well-being.
        </p>
        <button id="registerButton" class="bg-teal-600 text-white py-4 px-10 rounded-lg text-lg hover:bg-teal-700">Get Started</button>
    </div>
    <div class="mt-12 lg:mt-0">
        <img src="/static/images/homepage.png" alt="Consultant" class="rounded-xl shadow-lg w-full lg:w-[500px]">
    </div>
</section>

<!-- Features Section -->
<section class="px-10 py-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
    <!-- Feature Card -->
    <div class="feature-card bg-white p-6 rounded-xl shadow-lg text-center transform transition-transform hover:scale-105 hover:shadow-2xl">
        <div class="text-4xl text-teal-500 mb-4">üéß</div>
        <h3 class="text-2xl font-semibold mb-2">Free Consultation</h3>
        <p class="text-gray-600">We offer flexible appointment scheduling and free to accommodate your busy life.</p>
    </div>
    <div class="feature-card bg-white p-6 rounded-xl shadow-lg text-center transform transition-transform hover:scale-105 hover:shadow-2xl">
        <div class="text-4xl text-orange-500 mb-4">ü©∫</div>
        <h3 class="text-2xl font-semibold mb-2">Expert Therapy</h3>
        <p class="text-gray-600">Our team of experienced professionals boasts years of expertise in various areas of therapy.</p>
    </div>
    <div class="feature-card bg-white p-6 rounded-xl shadow-lg text-center transform transition-transform hover:scale-105 hover:shadow-2xl">
        <div class="text-4xl text-green-500 mb-4">‚≠ê</div>
        <h3 class="text-2xl font-semibold mb-2">High User Rating</h3>
        <p class="text-gray-600">We offer the latest techniques for ensuring your mental health is fully optimized.</p>
    </div>
    <div class="feature-card bg-white p-6 rounded-xl shadow-lg text-center transform transition-transform hover:scale-105 hover:shadow-2xl">
        <div class="text-4xl text-blue-500 mb-4">üß†</div>
        <h3 class="text-2xl font-semibold mb-2">Best Services</h3>
        <p class="text-gray-600">Our compassionate team is dedicated to making your experience comfortable and stress-free.</p>
    </div>
</section>


<!-- Login Popup -->
<div id="loginPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-80">
        <h2 class="text-2xl font-bold mb-4">Login</h2>
        <input type="text" id="loginUsername" placeholder="Username" class="w-full p-2 mb-4 border rounded">
        <input type="password" id="loginPassword" placeholder="Password" class="w-full p-2 mb-4 border rounded">
        <button id="loginSubmit" class="bg-teal-600 text-white py-2 px-4 rounded w-full hover:bg-teal-700">Submit</button>
        <button id="closeLoginPopup" class="mt-4 text-teal-600">Close</button>
    </div>
</div>


<!-- Register Popup -->
<div id="registerPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-80">
        <h2 class="text-2xl font-bold mb-4">Register</h2>
        <form id="registerForm">
            <!-- User Type Selection -->
            <label class="block mb-4">
                <span class="text-gray-700">I am a:</span>
                <select id="registerRole" class="w-full p-2 border rounded">
                    <option value="adolescent">Child</option>
                    <option value="guardian">Parent</option>
                </select>
            </label>
            <input type="text" id="registerFullname" placeholder="Full Name" class="w-full p-2 mb-4 border rounded" required>
            <input type="text" id="registerUsername" placeholder="Username" class="w-full p-2 mb-4 border rounded" required>
            <input type="password" id="registerPassword" placeholder="Password" class="w-full p-2 mb-4 border rounded" required>
            <button id="registerSubmit" class="bg-teal-600 text-white py-2 px-4 rounded w-full hover:bg-teal-700">Register</button>
            <button id="closeRegisterPopup" class="mt-4 text-teal-600">Close</button>
        </form>
    </div>
</div>



<!-- JavaScript for Popup Functionality -->
<script>
    const loginButton = document.getElementById('loginButton');
    const registerButton = document.getElementById('registerButton');
    const loginPopup = document.getElementById('loginPopup');
    const registerPopup = document.getElementById('registerPopup');
    const closeLoginPopup = document.getElementById('closeLoginPopup');
    const closeRegisterPopup = document.getElementById('closeRegisterPopup');

    loginButton.addEventListener('click', () => {
        loginPopup.classList.remove('hidden');
    });

    registerButton.addEventListener('click', () => {
        registerPopup.classList.remove('hidden');
    });

    closeLoginPopup.addEventListener('click', () => {
        loginPopup.classList.add('hidden');
    });

    closeRegisterPopup.addEventListener('click', () => {
        registerPopup.classList.add('hidden');
    });
    
    const userType = document.getElementById('registerRole');
const childEmailField = document.createElement('input'); // Creating childEmailField as a placeholder

// Append the child email field to the form (initially hidden)
childEmailField.setAttribute('type', 'email');
childEmailField.setAttribute('id', 'childEmail');
childEmailField.setAttribute('placeholder', 'Child Email');
childEmailField.classList.add('w-full', 'p-2', 'mb-4', 'border', 'rounded', 'hidden');
document.getElementById('registerForm').insertBefore(childEmailField, document.getElementById('registerFullname'));

// Show/hide childEmailField based on userType selection
userType.addEventListener('change', () => {
    if (userType.value === 'guardian') {
        childEmailField.classList.remove('hidden');
    } else {
        childEmailField.classList.add('hidden');
    }
});


    document.getElementById('registerSubmit').addEventListener('click', function (event) {
    event.preventDefault();
    const userData = {
        fullname: document.getElementById('registerFullname').value,
        username: document.getElementById('registerUsername').value,
        password: document.getElementById('registerPassword').value,
        role: document.getElementById('registerRole').value
    };

    fetch('/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(userData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.msg === "User already exists") {
            alert("User already exists. Please login.");
        } else {
            loginUser(userData.username, userData.password); // Auto-login after successful registration
        }
    })
    .catch(error => console.error('Error:', error));
});

function loginUser(username, password) {
    fetch('/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
    })
    .then(response => response.json())
    .then(data => {
        if (data.access_token) {
            localStorage.setItem('jwt_token', data.access_token);
            // Redirect to the /home route
            window.location.href = '/home';
            alert("Logged in successfully!");

            document.getElementById('loginPopup').classList.add('hidden');
            document.getElementById('registerPopup').classList.add('hidden');

        } else {
            alert("Invalid credentials. Please try again.");
        }
    })
    .catch(error => console.error('Error:', error));
}

document.getElementById('loginSubmit').addEventListener('click', function (event) {
    event.preventDefault();
    const username = document.getElementById('loginUsername').value;
    const password = document.getElementById('loginPassword').value;
    loginUser(username, password);
});

</script>

</body>
</html>
